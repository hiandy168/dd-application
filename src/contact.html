<!DOCTYPE html>
<html>
    <head>
        <title>有范钉钉通讯录</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
        <link rel="shortcut icon" type="image/x-icon" href=""/>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="format-detection" content="telephone=no">
        <meta name="author" content="" />
        <meta name="copyright" content=""/>
        <link rel="stylesheet" href="./css/task.css"/>
    </head>
    <body>

        <script src="//g.alicdn.com/ilw/cdnjs/jquery/2.1.4/jquery.min.js"></script>
        <script src="//g.alicdn.com/ilw/ding/0.6.2/scripts/dingtalk.js"></script>
        <script src="./js/fastclick.js"></script>
        <script src="./js/config.js"></script>
        <script type="text/javascript">

            dd.config({
                agentId: agentId,
                corpId: corpId,
                timeStamp: timeStamp,
                nonceStr: nonceStr,
                signature: '52b6f13d94b69bc02cc1645dde280ac7f9214fa8',
                jsApiList: [
                    'runtime.info',
                    'device.notification.prompt',
                    'biz.chat.pickConversation',
                    'device.notification.confirm',
                    'device.notification.alert',
                    'device.notification.prompt',
                    'biz.chat.open',
                    'biz.util.open',
                    'biz.user.get',
                    'biz.contact.choose',
                    'biz.telephone.call',
                    'biz.ding.post']
            });
            dd.ready(function(){
                alert("dd ready");
                $.ajax({
                    url:apiUrl+'department/list',
                    dataType:'json',
                    data:{access_token:access_token},
                    type:'GET',
                    success:function(data){
                        alert(data.department[0].name);
                    },
                    error:function(data){
                        alert(JSON.stringify(data));
                    }
                })
            })
            dd.error(function(err) {
                alert("error"+JSON.stringify(err));
                logger.e('dd error: ' + JSON.stringify(err));
            });

        </script>

    </body>
</html>
